<div class="fadeinright animation-duration-500 animation-ease-out">
  <p-card>
    <p-table
      #tableContratos
      [value]="contratoCompra"
      styleClass="p-datatable-striped"
      [paginator]="true"
      [rows]="quantidadeLinhas"
      [totalRecords]="totalRegistros"
      [rowsPerPageOptions]="[10, 25, 50]"
      [loading]="carregando"
      loadingIcon="pi pi-spin pi-spinner"
      (sortFunction)="ordenar($event)"
      [customSort]="true"
      dataKey="numCtr"
      [globalFilterFields]="[
        'numCtr',
        'codFor',
        'tipVlz',
      ]"
    >
      <ng-template pTemplate="caption">
        <div class="flex justify-content-between">
          <div class="flex gap-4">
            <button
              pButton
              label="Limpar filtro"
              class="p-button-outlined"
              icon="pi pi-filter-slash"
              (click)="clear(tableContratos)"
            ></button>

            <span class="p-input-icon-left ml-auto">
              <i class="pi pi-search"></i>
              <input
                pInputText
                type="text"
                [(ngModel)]="valorInput"
                class="p-inputtext-sm"
                (input)="tableContratos.filterGlobal(valorInput, 'contains')"
                placeholder="Pesquisar Contrato..."
              />
            </span>
          </div>
        </div>
      </ng-template>

      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="numCtr">
            N: Contrato<p-sortIcon field="numCtr"> </p-sortIcon>
          </th>
          <th pSortableColumn="codFor">
            Fornecedor<p-sortIcon field="codFor"> </p-sortIcon>
          </th>
          <th pSortableColumn="tipVlz">
            Tipo de Valorização<p-sortIcon field="tipVlz"> </p-sortIcon>
          </th>
          <th>
            Moeda
          </th>
          <th>
            Safra
          </th>
          <th>
            Cod. Produto
          </th>
          <th>
            Complemento
          </th>
          <th>
            UM
          </th>
          <th>
            Depósito
          </th>
          <th>
            Origem da Mercadoria
          </th>
          <th>
            Preço Unitário
          </th>
          <th>
            Quantidade
          </th>
          <th>
            Data Emissão
          </th>
        </tr>
      </ng-template>


      <ng-template pTemplate="body" let-contrato>
        <tr>
          <td>{{contrato.numCtr}}</td>
          <td>{{contrato.codFor}}</td>
          <td>{{ contrato.tipVlz == 1 ? 'Valorização Fixa' : (contrato.tipVlz == 2 ? 'Valorização Variável' : '') }}</td>
          <td>{{contrato.codMoe}}</td>
          <td>{{contrato.codSaf}}</td>
          <td>{{contrato.codPro}}</td>
          <td>{{contrato.cplCcp}}</td>
          <td>{{contrato.uniMed}}</td>
          <td>{{contrato.codDep}}</td>
          <td>{{contrato.oriMer}}</td>
          <td>{{ currencyFormatter(contrato.preUni) }}</td>
          <td>{{contrato.qtdFor}}</td>
          <td>{{contrato.datEmi}}</td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>
</div>

<p-toast></p-toast>
